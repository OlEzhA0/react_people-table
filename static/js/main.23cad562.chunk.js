(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(21),o=a.n(c),l=a(7),u=a(12),s=a(1),i=(a(29),a(2)),m=a(15),d=a.n(m),f=a(18),b=a(22),p=function(){var e=Object(b.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=(a=e.sent).map((function(e,t){return Object(f.a)(Object(f.a)({id:t+1},e),{},{mother:e.mother?e.mother:"",father:e.father?e.father:"",age:e.died-e.born,century:Math.ceil(e.died/100),children:a.map((function(t){if(e.name===t.father||e.name===t.mother)return t.name})).filter((function(e){return e})).join(", ")})})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=e.keysForHeader,a=e.sortBy,r={id:"number",name:"string",sex:"string",born:"number",father:"string",mother:"string",died:"number",age:"number",century:"number",children:"string"};return n.a.createElement("thead",{className:"thead-light myThead"},n.a.createElement("tr",null,t.map((function(e){return n.a.createElement("th",{scope:"col",key:e,onClick:function(){return a(e,r[e])}},e)}))))},E=a(8),g=a.n(E),v=function(e){var t=e.name,a=e.sex,r=e.born;return n.a.createElement("td",{scope:"row",className:g()({"Person--name__male":"m"===a,"Person--name__female":"f"===a,"Old-birth":r<=1650})},t)},O=function(e){var t=e.keysForHeader,a=e.people,r=e.selectPerson,c=e.selectedPerson;return n.a.createElement("tbody",null,a.map((function(e){return n.a.createElement("tr",{className:g()("Person--lived-in-".concat(e.century),{"Person--male":"m"===e.sex,"Person--female":"f"===e.sex,"Person--selected":c===e.id}),onClick:function(){return r(e.id)},key:e.name+e.father},t.map((function(t,a){return 0===a?n.a.createElement("th",{scope:"row",key:t},e[t]):"name"===t?n.a.createElement(v,{name:e[t],sex:e.sex,key:t,born:e.born}):n.a.createElement("td",{className:g()({GoodAge:"age"===t&&e.age&&e.age>=65}),key:t},e[t])})))})))},j=function(e){var t=e.people,a=e.sortBy,c=Object(r.useState)(0),o=Object(s.a)(c,2),l=o[0],u=o[1],m=[],d=Object(i.h)(),f=Object(i.f)(),b=Object(i.g)();Object(r.useEffect)((function(){if(d.params.id&&t.length){var e=t.find((function(e){return e.name.toLowerCase().replace(/ /g,"-")===d.params.id}));e&&u(e.id)}}),[t]);return Object(r.useEffect)((function(){var e,a=null===(e=t.find((function(e){return e.id===l})))||void 0===e?void 0:e.name;if(a){var r="/people/".concat(a.toLowerCase().replace(/ /g,"-"));f.push({pathname:r,search:b.search})}}),[l]),Object(r.useEffect)((function(){f.push({pathname:"/people"})}),[]),t.length&&(m=Object.keys(t[0])),n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{className:"PeopleTable table"},n.a.createElement(h,{keysForHeader:m,sortBy:a}),n.a.createElement(O,{selectedPerson:l,selectPerson:function(e){u(e)},keysForHeader:m,people:t})))},y=function(e,t){var a;return function(){clearTimeout(a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];a=setTimeout.apply(void 0,[e,t].concat(n))}},N="",_="",C=function(e){var t=e.startDebounce,a=Object(i.f)(),c=Object(i.g)(),o=new URLSearchParams(c.search),l=o.get("query")||"",u=o.get("sortBy"),s=o.get("sortOrder");Object(r.useEffect)((function(){t("")}),[]),u&&(N=u),s&&(_=s),Object(r.useEffect)((function(){l&&t(l)}),[]);var m=Object(r.useCallback)(y((function(e){return function(e){e?o.set("query",e):o.delete("query"),N&&o.set("sortBy",N),_&&o.set("sortOrder",_),a.push({search:o.toString()})}(e)}),1e3),[]);return n.a.createElement("div",{className:"input-group input-group-lg myInput"},n.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",placeholder:"Write for search",defaultValue:l,onChange:function(e){var a;a=e.target.value,m(a),t(e.target.value)}}))},k=function(e){var t=e.nameValue,a=e.handleInputName,r=e.errorName,c=e.bornValue,o=e.handleInputAgeInfo,l=e.errorBorn,u=e.diedValue,s=e.errorDied,i=e.blurValidation;return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__inp"},"Name:",n.a.createElement("input",{type:"text",value:t,onChange:function(e){return a(e)},placeholder:" Write the name",onBlur:function(){return i("name")},className:g()({"inp-err":r})})),r&&n.a.createElement("span",{className:"error__name"},"Please, write correctly name"),n.a.createElement("label",{className:"add__inp"},"Born:",n.a.createElement("input",{type:"text",value:c,onChange:function(e){return o(e,"born")},placeholder:" Year of born  'XXXX'",onBlur:function(){return i("born")},className:g()({"inp-err":l})})),l&&n.a.createElement("span",{className:"error__born"},"Please, write correctly born year"),n.a.createElement("label",{className:"add__inp"},"Died:",n.a.createElement("input",{type:"text",value:u,onChange:function(e){return o(e,"died")},placeholder:" Year of died  'XXXX'",onBlur:function(){return i("died")},className:g()({"inp-err":s})})),s&&n.a.createElement("span",{className:"error__year"},"Please, write correctly died year"))},S=function(e){var t=e.errorBorn,a=e.errorDied,r=e.errorName,c=e.bigDifference,o=e.validation,l=e.minusDifference;return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",className:"add__button",disabled:t||a||r||c||l,onClick:function(){return o("")}},"Add person"),c&&n.a.createElement("span",{className:"error__difference"},"The difference between the year of birth and death should not exceed 150"),l&&!c&&n.a.createElement("span",{className:"error__difference--small"},"Year of birth should be more than death"))},w=function(e){var t=e.genderValue,a=e.chooseGender,r=e.errorGender;return n.a.createElement("div",{className:"gender__container"},n.a.createElement("label",{className:"add__rad"},"Male",n.a.createElement("input",{type:"radio",checked:"m"===t,className:"radio__btn",onChange:function(){return a("m")}})),n.a.createElement("label",{className:"add__rad"},"Female",n.a.createElement("input",{type:"radio",checked:"f"===t,className:"radio__btn",onChange:function(){return a("f")}})),r&&n.a.createElement("p",{className:"error__gender"},"Please, choose gender"))},x=function(e){var t=e.people,a=e.fatherValue,r=e.chooseFather,c=e.errorFather,o=e.bornValue,l=t.map((function(e){return"m"===e.sex&&e.born<+o&&e.died>+o?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__father"}," ","Choose father:",n.a.createElement("select",{value:a,onChange:function(e){return r(e)}},n.a.createElement("option",{value:"",hidden:!0},o?"Choose here":"Write birth year"),l.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),c&&n.a.createElement("span",{className:"error__father"},"Choose father"))},P=function(e){var t=e.people,a=e.fatherValue,r=e.chooseMother,c=e.errorMother,o=e.bornValue,l=t.map((function(e){return"f"===e.sex&&e.born<+o&&e.died>+o?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__mother"}," ","Choose mother:",n.a.createElement("select",{value:a,onChange:function(e){return r(e)}},n.a.createElement("option",{value:"",hidden:!0},o?"Choose here":"Write birth year"),l.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),c&&n.a.createElement("span",{className:"error__mother"},"Choose mother"))},V=/[0-9]| {2}|\!|\.|\@|\#|\$|\%|\^|\&|\*|\(|\)|^\s+/g,B=(new Date).getFullYear(),F=function(e){var t=e.people,a=e.addPerson,c=Object(r.useState)(""),o=Object(s.a)(c,2),l=o[0],u=o[1],m=Object(r.useState)(""),d=Object(s.a)(m,2),f=d[0],b=d[1],p=Object(r.useState)(""),h=Object(s.a)(p,2),E=h[0],g=h[1],v=Object(r.useState)(""),O=Object(s.a)(v,2),j=O[0],y=O[1],N=Object(r.useState)(""),_=Object(s.a)(N,2),C=_[0],F=_[1],D=Object(r.useState)(""),L=Object(s.a)(D,2),M=L[0],A=L[1],I=Object(r.useState)(!1),T=Object(s.a)(I,2),X=T[0],G=T[1],H=Object(r.useState)(!1),W=Object(s.a)(H,2),Y=W[0],q=W[1],z=Object(r.useState)(!1),J=Object(s.a)(z,2),R=J[0],U=J[1],$=Object(r.useState)(!1),K=Object(s.a)($,2),Q=K[0],Z=K[1],ee=Object(r.useState)(!1),te=Object(s.a)(ee,2),ae=te[0],re=te[1],ne=Object(r.useState)(!1),ce=Object(s.a)(ne,2),oe=ce[0],le=ce[1],ue=Object(r.useState)(!1),se=Object(s.a)(ue,2),ie=se[0],me=se[1],de=Object(r.useState)(!1),fe=Object(s.a)(de,2),be=fe[0],pe=fe[1],he=Object(r.useState)(!1),Ee=Object(s.a)(he,2),ge=Ee[0],ve=Ee[1],Oe=function(){u(""),b(""),g(""),y(""),F(""),A(""),pe(!1)};return n.a.createElement("div",{className:"add__people"},n.a.createElement("p",{className:"add__title"},"Add new person"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},n.a.createElement(k,{nameValue:l,handleInputName:function(e){u(e.target.value.replace(V,"")),e.target.value?Z(!1):Z(!0)},errorName:Q,bornValue:f,handleInputAgeInfo:function(e,t){var a=e.target.value.replace(/\D/g,"");"born"===t&&(b(a),e.target.value?(re(!1),me(!1),pe(!1)):(re(!0),pe(!1))),"died"===t&&(g(a),a?(le(!1),pe(!1),me(!1)):(le(!0),pe(!1)))},errorBorn:ae,diedValue:E,errorDied:oe,blurValidation:function(e){l||"name"!==e?!(+f>B)&&f||"born"!==e?(+E>B||!E)&&"died"===e&&le(!0):re(!0):Z(!0)}}),n.a.createElement(w,{genderValue:j,chooseGender:function(e){y(e),ve(!1)},errorGender:ge}),n.a.createElement(x,{bornValue:f,people:t,fatherValue:C,chooseFather:function(e){F(e.target.value),U(!1)},errorFather:R}),n.a.createElement(P,{people:t,bornValue:f,fatherValue:M,chooseMother:function(e){A(e.target.value),q(!1)},errorMother:Y}),n.a.createElement(S,{errorBorn:ae,errorDied:oe,errorName:Q,bigDifference:be,minusDifference:ie,validation:function(){var e=!1;return+f>+E?(console.log("more than"),me(!0),le(!0),re(!0),void(e=!0)):(l||(Z(!0),e=!0),(+f>B||!f)&&(re(!0),e=!0),(+E>B||!E)&&(le(!0),e=!0),+E-+f>=150?(pe(!0),le(!0),re(!0),void(e=!0)):(C||(U(!0),e=!0),M||(q(!0),e=!0),j||(ve(!0),e=!0),void(e||(G(!0),a(l,f,E,j,C,M),Oe()))))}}),X&&n.a.createElement(i.a,{to:"/people"})))},D={id:"number",name:"string",sex:"string",born:"number",father:"string",mother:"string",died:"number",age:"number",century:"number",children:"string"},L=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(""),m=Object(s.a)(o,2),d=m[0],f=m[1],b=Object(r.useState)(!1),h=Object(s.a)(b,2),E=h[0],g=h[1],v=Object(i.f)(),O=Object(i.g)(),N=new URLSearchParams(O.search),_=N.get("sortBy")||"",k=N.get("sortOrder")||"";Object(r.useEffect)((function(){a.length&&!E&&_&&(g(!0),S(_,D[_]))}),[_,a]),Object(r.useEffect)((function(){p().then((function(e){c(e)}))}),[]);var S=function(e,t){var r="";if("asc"===k){var n=Object(u.a)(a).sort((function(a,r){var n=a[e]||"",c=r[e]||"";return"number"===t?Number(c)-Number(n):"string"===t?c.localeCompare(n):0}));return r=E?"desc":"asc",c(n),N.set("sortBy","".concat(e)),N.set("sortOrder","".concat(r)),v.push({search:N.toString()}),void g(!0)}var o=Object(u.a)(a).sort((function(a,r){var n=a[e]||"",c=r[e]||"";return"number"===t?Number(n)-Number(c):"string"===t?n.localeCompare(c):0}));c(o),r=E?"asc":"desc",g(!0),N.set("sortBy","".concat(e)),N.set("sortOrder","".concat(r)),v.push({search:N.toString()})},w=function(e){x(e)},x=Object(r.useCallback)(y((function(e){return f(e)}),1e3),[]),P=Object(r.useMemo)((function(){return d?a.filter((function(e){var t=e.name,a=e.mother,r=e.father,n=d.toLowerCase();return!!n&&!!(t.toLowerCase().includes(n)||a.toLowerCase().includes(n)||r.toLowerCase().includes(n))})):a}),[d,a]),V=function(e,t,r,o,l,s){var m=a.map((function(e){return e.id})),d={id:Math.max.apply(Math,Object(u.a)(m))+1,name:e,born:+t,died:+r,sex:o,father:l,mother:s,age:+r-+t,century:Math.ceil(+t/100),children:""};return c([].concat(Object(u.a)(a),[d])),n.a.createElement(i.a,{to:"/people/:id?"})};return n.a.createElement("div",{className:"App"},n.a.createElement("nav",null,n.a.createElement("ul",{className:"list"},n.a.createElement("li",{className:"item"},n.a.createElement(l.b,{activeClassName:"activeLink",className:"linka",to:"/",exact:!0},"Home")),n.a.createElement("li",{className:"item"},n.a.createElement(l.b,{activeClassName:"activeLink",className:"linka",to:"/people"},"People Table")),n.a.createElement("li",{className:"item"},n.a.createElement(l.b,{activeClassName:"activeLink",className:"linka",to:"/new-person"},"Add person")))),n.a.createElement(i.b,{exact:!0,path:"/people/:id?",render:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(C,{startDebounce:w}),n.a.createElement(j,{people:P,sortBy:S}))}}),n.a.createElement(i.b,{exact:!0,path:"/",render:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"title"},"Demo Header"))}}),n.a.createElement(i.b,{exact:!0,path:"/new-person",render:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{people:a,addPerson:V}))}}))};o.a.render(n.a.createElement(l.a,null,n.a.createElement(L,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.23cad562.chunk.js.map