(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{24:function(e,t,r){e.exports=r(36)},29:function(e,t,r){},36:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(21),o=r.n(c),l=r(8),u=r(12),s=r(2),i=(r(29),r(1)),m=r(15),d=r.n(m),f=r(18),p=r(22),b=function(){var e=Object(p.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return r=(r=e.sent).map((function(e,t){return Object(f.a)(Object(f.a)({id:t+1},e),{},{mother:e.mother?e.mother:"",father:e.father?e.father:"",age:e.died-e.born,century:Math.ceil(e.died/100),children:r.map((function(t){if(e.name===t.father||e.name===t.mother)return t.name})).filter((function(e){return e})).join(", ")})})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=e.keysForHeader,r=e.sortBy,a={id:"number",name:"string",sex:"string",born:"number",father:"string",mother:"string",died:"number",age:"number",century:"number",children:"string"};return n.a.createElement("thead",{className:"thead-light myThead"},n.a.createElement("tr",null,t.map((function(e){return n.a.createElement("th",{scope:"col",key:e,onClick:function(){return r(e,a[e])}},e)}))))},g=r(7),E=r.n(g),v=function(e){var t=e.name,r=e.sex,a=e.born;return n.a.createElement("td",{scope:"row",className:E()({"Person--name__male":"m"===r,"Person--name__female":"f"===r,"Old-birth":a<=1650})},t)},O=function(e){var t=e.keysForHeader,r=e.people,a=e.selectPerson,c=e.selectedPerson;return n.a.createElement("tbody",null,r.map((function(e){return n.a.createElement("tr",{className:E()("Person--lived-in-".concat(e.century),{"Person--male":"m"===e.sex,"Person--female":"f"===e.sex,"Person--selected":c===e.id}),onClick:function(){return a(e.id)},key:e.name+e.father},t.map((function(t,r){return 0===r?n.a.createElement("th",{scope:"row",key:t},e[t]):"name"===t?n.a.createElement(v,{name:e[t],sex:e.sex,key:t,born:e.born}):n.a.createElement("td",{className:E()({GoodAge:"age"===t&&e.age&&e.age>=65}),key:t},e[t])})))})))},j=function(e){var t=e.people,r=e.sortBy,c=Object(a.useState)(0),o=Object(s.a)(c,2),l=o[0],u=o[1],m=[],d=Object(i.h)(),f=Object(i.f)(),p=Object(i.g)();Object(a.useEffect)((function(){if(d.params.id&&t.length){var e=t.find((function(e){return e.name.toLowerCase().replace(/ /g,"-")===d.params.id}));e&&u(e.id)}}),[t]);return Object(a.useEffect)((function(){var e,r=null===(e=t.find((function(e){return e.id===l})))||void 0===e?void 0:e.name;if(r){var a="/people/".concat(r.toLowerCase().replace(/ /g,"-"));f.push({pathname:a,search:p.search})}}),[l]),t.length&&(m=Object.keys(t[0])),n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{className:"PeopleTable table"},n.a.createElement(h,{keysForHeader:m,sortBy:r}),n.a.createElement(O,{selectedPerson:l,selectPerson:function(e){u(e)},keysForHeader:m,people:t})))},y=function(e,t){var r;return function(){clearTimeout(r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];r=setTimeout.apply(void 0,[e,t].concat(n))}},_="",N="",C=function(e){var t=e.startDebounce,r=Object(i.f)(),c=Object(i.g)(),o=new URLSearchParams(c.search),l=o.get("query")||"",u=o.get("sortBy"),s=o.get("sortOrder");u&&(_=u),s&&(N=s),Object(a.useEffect)((function(){l&&t(l)}),[]);var m=Object(a.useCallback)(y((function(e){return function(e){e?o.set("query",e):o.delete("query"),_&&o.set("sortBy",_),N&&o.set("sortOrder",N),r.push({search:o.toString()}),console.log(r)}(e)}),1e3),[]);return n.a.createElement("div",{className:"input-group input-group-lg myInput"},n.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",placeholder:"Write for search",defaultValue:l,onChange:function(e){var r;r=e.target.value,m(r),t(e.target.value)}}))},S=function(e){var t=e.nameValue,r=e.handleInputName,a=e.errorName,c=e.bornValue,o=e.handleInputAgeInfo,l=e.errorBorn,u=e.diedValue,s=e.errorDied,i=e.blurValidation;return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__inp"},"Name:",n.a.createElement("input",{type:"text",value:t,onChange:function(e){return r(e)},placeholder:" Write the name",onBlur:function(){return i("name")},className:E()({"inp-err":a})})),a&&n.a.createElement("span",{className:"error__name"},"Please, write correctly name"),n.a.createElement("label",{className:"add__inp"},"Born:",n.a.createElement("input",{type:"text",value:c,onChange:function(e){return o(e,"born")},placeholder:" Year of born  'XXXX'",onBlur:function(){return i("born")},className:E()({"inp-err":l})})),l&&n.a.createElement("span",{className:"error__born"},"Please, write correctly born year"),n.a.createElement("label",{className:"add__inp"},"Died:",n.a.createElement("input",{type:"text",value:u,onChange:function(e){return o(e,"died")},placeholder:" Year of died  'XXXX'",onBlur:function(){return i("died")},className:E()({"inp-err":s})})),s&&n.a.createElement("span",{className:"error__year"},"Please, write correctly died year"))},w=function(e){var t=e.errorBorn,r=e.errorDied,a=e.errorName,c=e.bigDifference,o=e.validation,l=e.minusDifference;return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",className:"add__button",disabled:t||r||a||c||l,onClick:function(){return o("")}},"Add person"),c&&n.a.createElement("span",{className:"error__difference"},"The difference between the year of birth and death should not exceed 150"),l&&!c&&n.a.createElement("span",{className:"error__difference--small"},"Year of birth should be more than death"))},k=function(e){var t=e.genderValue,r=e.chooseGender,a=e.errorGender;return n.a.createElement("div",{className:"gender__container"},n.a.createElement("label",{className:"add__rad"},"Male",n.a.createElement("input",{type:"radio",checked:"m"===t,className:"radio__btn",onChange:function(){return r("m")}})),n.a.createElement("label",{className:"add__rad"},"Female",n.a.createElement("input",{type:"radio",checked:"f"===t,className:"radio__btn",onChange:function(){return r("f")}})),a&&n.a.createElement("p",{className:"error__gender"},"Please, choose gender"))},x=function(e){var t=e.people,r=e.fatherValue,a=e.chooseFather,c=e.errorFather,o=t.map((function(e){return"m"===e.sex?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__father"}," ","Choose father:",n.a.createElement("select",{value:r,onChange:function(e){return a(e)}},n.a.createElement("option",{value:"",hidden:!0},"Choose here"),o.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),c&&n.a.createElement("span",{className:"error__father"},"Choose father"))},P=function(e){var t=e.people,r=e.fatherValue,a=e.chooseMother,c=e.errorMother,o=t.map((function(e){return"f"===e.sex?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__mother"}," ","Choose mother:",n.a.createElement("select",{value:r,onChange:function(e){return a(e)}},n.a.createElement("option",{value:"",hidden:!0},"Choose here"),o.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),c&&n.a.createElement("span",{className:"error__mother"},"Choose mother"))},B=/[0-9]| {2}|\!|\.|\@|\#|\$|\%|\^|\&|\*|\(|\)|^\s+/g,D=(new Date).getFullYear(),F=function(e){var t=e.people,r=e.addPerson,c=Object(a.useState)(""),o=Object(s.a)(c,2),l=o[0],u=o[1],i=Object(a.useState)(""),m=Object(s.a)(i,2),d=m[0],f=m[1],p=Object(a.useState)(""),b=Object(s.a)(p,2),h=b[0],g=b[1],E=Object(a.useState)(""),v=Object(s.a)(E,2),O=v[0],j=v[1],y=Object(a.useState)(""),_=Object(s.a)(y,2),N=_[0],C=_[1],F=Object(a.useState)(""),V=Object(s.a)(F,2),M=V[0],I=V[1],L=Object(a.useState)(!1),X=Object(s.a)(L,2),A=X[0],T=X[1],G=Object(a.useState)(!1),H=Object(s.a)(G,2),Y=H[0],q=H[1],z=Object(a.useState)(!1),J=Object(s.a)(z,2),R=J[0],U=J[1],W=Object(a.useState)(!1),$=Object(s.a)(W,2),K=$[0],Q=$[1],Z=Object(a.useState)(!1),ee=Object(s.a)(Z,2),te=ee[0],re=ee[1],ae=Object(a.useState)(!1),ne=Object(s.a)(ae,2),ce=ne[0],oe=ne[1],le=Object(a.useState)(!1),ue=Object(s.a)(le,2),se=ue[0],ie=ue[1],me=Object(a.useState)(!1),de=Object(s.a)(me,2),fe=de[0],pe=de[1],be=function(){u(""),f(""),g(""),j(""),C(""),I(""),ie(!1)};return n.a.createElement("div",{className:"add__people"},n.a.createElement("p",{className:"add__title"},"Add new person"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},n.a.createElement(S,{nameValue:l,handleInputName:function(e){u(e.target.value.replace(B,"")),e.target.value?U(!1):U(!0)},errorName:R,bornValue:d,handleInputAgeInfo:function(e,t){var r=e.target.value.replace(/\D/g,"");"born"===t&&(f(r),e.target.value?(Q(!1),oe(!1),ie(!1)):(Q(!0),ie(!1))),"died"===t&&(g(r),r?(re(!1),ie(!1),oe(!1)):(re(!0),ie(!1)))},errorBorn:K,diedValue:h,errorDied:te,blurValidation:function(e){l||"name"!==e?!(+d>D)&&d||"born"!==e?(+h>D||!h)&&"died"===e&&re(!0):Q(!0):U(!0)}}),n.a.createElement(k,{genderValue:O,chooseGender:function(e){j(e),pe(!1)},errorGender:fe}),n.a.createElement(x,{people:t,fatherValue:N,chooseFather:function(e){C(e.target.value),q(!1)},errorFather:Y}),n.a.createElement(P,{people:t,fatherValue:M,chooseMother:function(e){I(e.target.value),T(!1)},errorMother:A}),n.a.createElement(w,{errorBorn:K,errorDied:te,errorName:R,bigDifference:se,minusDifference:ce,validation:function(){return+d>+h?(console.log("more than"),oe(!0),re(!0),void Q(!0)):(l||U(!0),(+d>D||!d)&&Q(!0),(+h>D||!h)&&re(!0),+h-+d>=150?(ie(!0),re(!0),void Q(!0)):(N||q(!0),M||T(!0),O||pe(!0),void(A||Y||R||K||te||ce||se||fe||(console.log(ce),console.log("in"),r(l,d,h,O,N,M),be()))))}})))},V={id:"number",name:"string",sex:"string",born:"number",father:"string",mother:"string",died:"number",age:"number",century:"number",children:"string"},M=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),r=t[0],c=t[1],o=Object(a.useState)(""),m=Object(s.a)(o,2),d=m[0],f=m[1],p=Object(a.useState)(!1),h=Object(s.a)(p,2),g=h[0],E=h[1],v=Object(i.f)(),O=Object(i.g)(),_=new URLSearchParams(O.search),N=_.get("sortBy")||"",S=_.get("sortOrder")||"";Object(a.useEffect)((function(){r.length&&!g&&N&&(E(!0),w(N,V[N]))}),[N,r]),Object(a.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var w=function(e,t){var a="";if("asc"===S){var n=Object(u.a)(r).sort((function(r,a){var n=r[e]||"",c=a[e]||"";return"number"===t?Number(c)-Number(n):"string"===t?c.localeCompare(n):0}));return a=g?"desc":"asc",c(n),_.set("sortBy","".concat(e)),_.set("sortOrder","".concat(a)),v.push({search:_.toString()}),void E(!0)}var o=Object(u.a)(r).sort((function(r,a){var n=r[e]||"",c=a[e]||"";return"number"===t?Number(n)-Number(c):"string"===t?n.localeCompare(c):0}));c(o),a=g?"asc":"desc",_.set("sortBy","".concat(e)),_.set("sortOrder","".concat(a)),v.push({search:_.toString()})},k=function(e){x(e)},x=Object(a.useCallback)(y((function(e){return f(e)}),1e3),[]),P=Object(a.useMemo)((function(){return d?r.filter((function(e){var t=e.name,r=e.mother,a=e.father,n=d.toLowerCase();return!!n&&!!(t.toLowerCase().includes(n)||r.toLowerCase().includes(n)||a.toLowerCase().includes(n))})):r}),[d,r]),B=function(e,t,a,o,l,s){var m=r.map((function(e){return e.id})),d={id:Math.max.apply(Math,Object(u.a)(m))+1,name:e,born:+t,died:+a,sex:o,father:l,mother:s,age:+a-+t,century:Math.ceil(+t/100),children:""};return c([].concat(Object(u.a)(r),[d])),n.a.createElement(i.a,{to:"/people/:id?"})};return n.a.createElement("div",{className:"App"},n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(l.b,{to:"/people"},"People table")),n.a.createElement("li",null,n.a.createElement(l.b,{to:"/"},"Home page")))),n.a.createElement(i.b,{path:"/people/:id?",render:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{people:r,addPerson:B}),n.a.createElement(C,{startDebounce:k}),n.a.createElement(j,{people:P,sortBy:w}))}}))};o.a.render(n.a.createElement(l.a,null,n.a.createElement(M,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.7a9dfc2c.chunk.js.map