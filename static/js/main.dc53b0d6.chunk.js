(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(9),c=a.n(o),l=a(4),u=a(1),i=(a(16),a(6)),s=a.n(i),m=a(7),d=a(10),f=function(){var e=Object(d.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=(a=e.sent).map((function(e,t){return Object(m.a)(Object(m.a)({id:t+1},e),{},{mother:e.mother?e.mother:"",father:e.father?e.father:"",age:e.died-e.born,century:Math.ceil(e.died/100),children:a.map((function(t){if(e.name===t.father||e.name===t.mother)return t.name})).filter((function(e){return e})).join(", ")})})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){var t=e.keysForHeader,a=e.sortBy,r={id:"number",name:"string",sex:"string",born:"number",father:"string",mother:"string",died:"number",age:"number",century:"number",children:"string"};return n.a.createElement("thead",{className:"thead-light myThead"},n.a.createElement("tr",null,t.map((function(e){return n.a.createElement("th",{scope:"col",key:e,onClick:function(){return a(e,r[e])}},e)}))))},h=a(2),b=a.n(h),g=function(e){var t=e.name,a=e.sex;return n.a.createElement("td",{scope:"row",className:b()({"Person--name__male":"m"===a,"Person--name__female":"f"===a})},t)},E=function(e){var t=e.keysForHeader,a=e.people,r=e.selectPerson,o=e.selectedPerson;return n.a.createElement("tbody",null,a.map((function(e){return n.a.createElement("tr",{className:b()("Person--lived-in-".concat(e.century),{"Person--male":"m"===e.sex,"Person--female":"f"===e.sex,"Old-birth":e.born&&e.born<=1650,"Person--selected":1===o.length&&o[0].id===e.id}),onClick:function(){return r(e.id)},key:e.name+e.father},t.map((function(t,a){return 0===a?n.a.createElement("th",{scope:"row",key:t},e[t]):"name"===t?n.a.createElement(g,{name:e[t],sex:e.sex,key:t}):n.a.createElement("td",{className:b()({GoodAge:"age"===t&&e.age&&e.age>=65}),key:t},e[t])})))})))},v=function(e){var t=e.people,a=e.sortBy,o=Object(r.useState)([]),c=Object(u.a)(o,2),l=c[0],i=c[1],s=[];return t.length&&(s=Object.keys(t[0])),n.a.createElement("table",{className:"PeopleTable table"},n.a.createElement(p,{keysForHeader:s,sortBy:a}),n.a.createElement(E,{selectedPerson:l,selectPerson:function(e){var a=t.find((function(t){return t.id===e}));a&&i([a])},keysForHeader:s,people:t}))},j=function(e){var t=e.startDebounce;return n.a.createElement("div",{className:"input-group input-group-lg myInput"},n.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",placeholder:"Write for search",onChange:function(e){return t(e)}}))},_=function(e){var t=e.nameValue,a=e.handleInputName,r=e.errorName,o=e.bornValue,c=e.handleInputAgeInfo,l=e.errorBorn,u=e.diedValue,i=e.errorDied,s=e.blurValidation;return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__inp"},"Name:",n.a.createElement("input",{type:"text",value:t,onChange:function(e){return a(e)},placeholder:" Write the name",onBlur:function(){return s("name")},className:b()({"inp-err":r})})),r&&n.a.createElement("span",{className:"error__name"},"Please, write correctly name"),n.a.createElement("label",{className:"add__inp"},"Born:",n.a.createElement("input",{type:"text",value:o,onChange:function(e){return c(e,"born")},placeholder:" Year of born  'XXXX'",onBlur:function(){return s("born")},className:b()({"inp-err":l})})),l&&n.a.createElement("span",{className:"error__born"},"Please, write correctly born year"),n.a.createElement("label",{className:"add__inp"},"Died:",n.a.createElement("input",{type:"text",value:u,onChange:function(e){return c(e,"died")},placeholder:" Year of died  'XXXX'",onBlur:function(){return s("died")},className:b()({"inp-err":i})})),i&&n.a.createElement("span",{className:"error__year"},"Please, write correctly died year"))},O=function(e){var t=e.errorBorn,a=e.errorDied,r=e.errorName,o=e.bigDifference,c=e.validation,l=e.minusDifference;return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",className:"add__button",disabled:t||a||r||o||l,onClick:function(){return c("")}},"Add person"),o&&n.a.createElement("span",{className:"error__difference"},"The difference between the year of birth and death should not exceed 150"),l&&!o&&n.a.createElement("span",{className:"error__difference--small"},"Year of birth should be more than death"))},y=function(e){var t=e.genderValue,a=e.chooseGender,r=e.errorGender;return n.a.createElement("div",{className:"gender__container"},n.a.createElement("label",{className:"add__rad"},"Male",n.a.createElement("input",{type:"radio",checked:"m"===t,className:"radio__btn",onChange:function(){return a("m")}})),n.a.createElement("label",{className:"add__rad"},"Female",n.a.createElement("input",{type:"radio",checked:"f"===t,className:"radio__btn",onChange:function(){return a("f")}})),r&&n.a.createElement("p",{className:"error__gender"},"Please, choose gender"))},N=function(e){var t=e.people,a=e.fatherValue,r=e.chooseFather,o=e.errorFather,c=t.map((function(e){return"m"===e.sex?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__father"}," ","Choose father:",n.a.createElement("select",{value:a,onChange:function(e){return r(e)}},n.a.createElement("option",{value:"",hidden:!0},"Choose here"),c.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),o&&n.a.createElement("span",{className:"error__father"},"Choose father"))},C=function(e){var t=e.people,a=e.fatherValue,r=e.chooseMother,o=e.errorMother,c=t.map((function(e){return"f"===e.sex?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__mother"}," ","Choose mother:",n.a.createElement("select",{value:a,onChange:function(e){return r(e)}},n.a.createElement("option",{value:"",hidden:!0},"Choose here"),c.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),o&&n.a.createElement("span",{className:"error__mother"},"Choose mother"))},k=/[0-9]| {2}|\!|\.|\@|\#|\$|\%|\^|\&|\*|\(|\)|^\s+/g,x=(new Date).getFullYear(),S=function(e){var t=e.people,a=e.addPerson,o=Object(r.useState)(""),c=Object(u.a)(o,2),l=c[0],i=c[1],s=Object(r.useState)(""),m=Object(u.a)(s,2),d=m[0],f=m[1],p=Object(r.useState)(""),h=Object(u.a)(p,2),b=h[0],g=h[1],E=Object(r.useState)(""),v=Object(u.a)(E,2),j=v[0],S=v[1],w=Object(r.useState)(""),P=Object(u.a)(w,2),D=P[0],F=P[1],V=Object(r.useState)(""),B=Object(u.a)(V,2),M=B[0],I=B[1],X=Object(r.useState)(!1),A=Object(u.a)(X,2),T=A[0],G=A[1],H=Object(r.useState)(!1),L=Object(u.a)(H,2),Y=L[0],z=L[1],J=Object(r.useState)(!1),W=Object(u.a)(J,2),$=W[0],q=W[1],K=Object(r.useState)(!1),Q=Object(u.a)(K,2),R=Q[0],U=Q[1],Z=Object(r.useState)(!1),ee=Object(u.a)(Z,2),te=ee[0],ae=ee[1],re=Object(r.useState)(!1),ne=Object(u.a)(re,2),oe=ne[0],ce=ne[1],le=Object(r.useState)(!1),ue=Object(u.a)(le,2),ie=ue[0],se=ue[1],me=Object(r.useState)(!1),de=Object(u.a)(me,2),fe=de[0],pe=de[1],he=function(){i(""),f(""),g(""),S(""),F(""),I(""),se(!1)};return n.a.createElement("div",{className:"add__people"},n.a.createElement("p",{className:"add__title"},"Add new person"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},n.a.createElement(_,{nameValue:l,handleInputName:function(e){i(e.target.value.replace(k,"")),e.target.value?q(!1):q(!0)},errorName:$,bornValue:d,handleInputAgeInfo:function(e,t){var a=e.target.value.replace(/\D/g,"");"born"===t&&(f(a),e.target.value?(U(!1),ce(!1),se(!1)):(U(!0),se(!1))),"died"===t&&(g(a),a?(ae(!1),se(!1),ce(!1)):(ae(!0),se(!1)))},errorBorn:R,diedValue:b,errorDied:te,blurValidation:function(e){l||"name"!==e?!(+d>x)&&d||"born"!==e?(+b>x||!b)&&"died"===e&&ae(!0):U(!0):q(!0)}}),n.a.createElement(y,{genderValue:j,chooseGender:function(e){S(e),pe(!1)},errorGender:fe}),n.a.createElement(N,{people:t,fatherValue:D,chooseFather:function(e){F(e.target.value),z(!1)},errorFather:Y}),n.a.createElement(C,{people:t,fatherValue:M,chooseMother:function(e){I(e.target.value),G(!1)},errorMother:T}),n.a.createElement(O,{errorBorn:R,errorDied:te,errorName:$,bigDifference:ie,minusDifference:oe,validation:function(){return+d>+b?(console.log("more than"),ce(!0),ae(!0),void U(!0)):(l||q(!0),(+d>x||!d)&&U(!0),(+b>x||!b)&&ae(!0),+b-+d>=150?(se(!0),ae(!0),void U(!0)):(D||z(!0),M||G(!0),j||pe(!0),void(T||Y||$||R||te||oe||ie||fe||(console.log(oe),console.log("in"),a(l,d,b,j,D,M),he()))))}})))},w=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),s=i[0],m=i[1],d=Object(r.useState)("id"),p=Object(u.a)(d,2),h=p[0],b=p[1];Object(r.useEffect)((function(){f().then((function(e){return o(e)}))}),[]);var g=function(e,t){var a;return function(){clearTimeout(a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];a=setTimeout.apply(void 0,[e,t].concat(n))}}((function(e){return m(e)}),1e3),E=Object(r.useMemo)((function(){return s?a.filter((function(e){var t=e.name,a=e.mother,r=e.father,n=s.toLowerCase();return!!n&&!!(t.toLowerCase().includes(n)||a.toLowerCase().includes(n)||r.toLowerCase().includes(n))})):a}),[s,a]);return n.a.createElement("div",{className:"App"},n.a.createElement(S,{people:a,addPerson:function(e,t,r,n,c,u){var i=a.map((function(e){return e.id})),s={id:Math.max.apply(Math,Object(l.a)(i))+1,name:e,born:+t,died:+r,sex:n,father:c,mother:u,age:+r-+t,century:Math.ceil(+t/100),children:""};o([].concat(Object(l.a)(a),[s]))}}),n.a.createElement(j,{startDebounce:function(e){var t=e.target.value;g(t)}}),n.a.createElement(v,{people:E,sortBy:function(e,t){if(h!==e){var r=Object(l.a)(a).sort((function(a,r){var n=a[e]||"",o=r[e]||"";return"number"===t?Number(n)-Number(o):"string"===t?n.localeCompare(o):0}));b(e),o(r)}else o(Object(l.a)(a).reverse())}}))};c.a.render(n.a.createElement(w,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.dc53b0d6.chunk.js.map