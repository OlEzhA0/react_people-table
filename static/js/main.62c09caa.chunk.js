(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(21),o=a.n(c),l=a(8),u=a(12),s=a(2),i=(a(29),a(1)),m=a(15),d=a.n(m),f=a(18),p=a(22),b=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=(a=e.sent).map((function(e,t){return Object(f.a)(Object(f.a)({id:t+1},e),{},{mother:e.mother?e.mother:"",father:e.father?e.father:"",age:e.died-e.born,century:Math.ceil(e.died/100),children:a.map((function(t){if(e.name===t.father||e.name===t.mother)return t.name})).filter((function(e){return e})).join(", ")})})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=e.keysForHeader,a=e.sortBy,r={id:"number",name:"string",sex:"string",born:"number",father:"string",mother:"string",died:"number",age:"number",century:"number",children:"string"};return n.a.createElement("thead",{className:"thead-light myThead"},n.a.createElement("tr",null,t.map((function(e){return n.a.createElement("th",{scope:"col",key:e,onClick:function(){return a(e,r[e])}},e)}))))},g=a(7),E=a.n(g),v=function(e){var t=e.name,a=e.sex,r=e.born;return n.a.createElement("td",{scope:"row",className:E()({"Person--name__male":"m"===a,"Person--name__female":"f"===a,"Old-birth":r<=1650})},t)},O=function(e){var t=e.keysForHeader,a=e.people,r=e.selectPerson,c=e.selectedPerson;return n.a.createElement("tbody",null,a.map((function(e){return n.a.createElement("tr",{className:E()("Person--lived-in-".concat(e.century),{"Person--male":"m"===e.sex,"Person--female":"f"===e.sex,"Person--selected":c===e.id}),onClick:function(){return r(e.id)},key:e.name+e.father},t.map((function(t,a){return 0===a?n.a.createElement("th",{scope:"row",key:t},e[t]):"name"===t?n.a.createElement(v,{name:e[t],sex:e.sex,key:t,born:e.born}):n.a.createElement("td",{className:E()({GoodAge:"age"===t&&e.age&&e.age>=65}),key:t},e[t])})))})))},j=function(e){var t=e.people,a=e.sortBy,c=Object(r.useState)(0),o=Object(s.a)(c,2),l=o[0],u=o[1],m=[],d=Object(i.h)(),f=Object(i.f)(),p=Object(i.g)();Object(r.useEffect)((function(){if(d.params.id&&t.length){var e=t.find((function(e){return e.name.toLowerCase().replace(/ /g,"-")===d.params.id}));e&&u(e.id)}}),[t]);return Object(r.useEffect)((function(){var e,a=null===(e=t.find((function(e){return e.id===l})))||void 0===e?void 0:e.name;if(a){var r="/people/".concat(a.toLowerCase().replace(/ /g,"-"));f.push({pathname:r,search:p.search})}}),[l]),t.length&&(m=Object.keys(t[0])),n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{className:"PeopleTable table"},n.a.createElement(h,{keysForHeader:m,sortBy:a}),n.a.createElement(O,{selectedPerson:l,selectPerson:function(e){u(e)},keysForHeader:m,people:t})))},y=function(e,t){var a;return function(){clearTimeout(a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];a=setTimeout.apply(void 0,[e,t].concat(n))}},N="",_="",C=function(e){var t=e.startDebounce,a=Object(i.f)(),c=Object(i.g)(),o=new URLSearchParams(c.search),l=o.get("query")||"",u=o.get("sortBy"),s=o.get("sortOrder");u&&(N=u),s&&(_=s),Object(r.useEffect)((function(){l&&t(l)}),[]);var m=Object(r.useCallback)(y((function(e){return function(e){e?o.set("query",e):o.delete("query"),N&&o.set("sortBy",N),_&&o.set("sortOrder",_),a.push({search:o.toString()}),console.log(a)}(e)}),1e3),[]);return n.a.createElement("div",{className:"input-group input-group-lg myInput"},n.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",placeholder:"Write for search",defaultValue:l,onChange:function(e){var a;a=e.target.value,m(a),t(e.target.value)}}))},k=function(e){var t=e.nameValue,a=e.handleInputName,r=e.errorName,c=e.bornValue,o=e.handleInputAgeInfo,l=e.errorBorn,u=e.diedValue,s=e.errorDied,i=e.blurValidation;return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__inp"},"Name:",n.a.createElement("input",{type:"text",value:t,onChange:function(e){return a(e)},placeholder:" Write the name",onBlur:function(){return i("name")},className:E()({"inp-err":r})})),r&&n.a.createElement("span",{className:"error__name"},"Please, write correctly name"),n.a.createElement("label",{className:"add__inp"},"Born:",n.a.createElement("input",{type:"text",value:c,onChange:function(e){return o(e,"born")},placeholder:" Year of born  'XXXX'",onBlur:function(){return i("born")},className:E()({"inp-err":l})})),l&&n.a.createElement("span",{className:"error__born"},"Please, write correctly born year"),n.a.createElement("label",{className:"add__inp"},"Died:",n.a.createElement("input",{type:"text",value:u,onChange:function(e){return o(e,"died")},placeholder:" Year of died  'XXXX'",onBlur:function(){return i("died")},className:E()({"inp-err":s})})),s&&n.a.createElement("span",{className:"error__year"},"Please, write correctly died year"))},S=function(e){var t=e.errorBorn,a=e.errorDied,r=e.errorName,c=e.bigDifference,o=e.validation,l=e.minusDifference;return n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",className:"add__button",disabled:t||a||r||c||l,onClick:function(){return o("")}},"Add person"),c&&n.a.createElement("span",{className:"error__difference"},"The difference between the year of birth and death should not exceed 150"),l&&!c&&n.a.createElement("span",{className:"error__difference--small"},"Year of birth should be more than death"))},w=function(e){var t=e.genderValue,a=e.chooseGender,r=e.errorGender;return n.a.createElement("div",{className:"gender__container"},n.a.createElement("label",{className:"add__rad"},"Male",n.a.createElement("input",{type:"radio",checked:"m"===t,className:"radio__btn",onChange:function(){return a("m")}})),n.a.createElement("label",{className:"add__rad"},"Female",n.a.createElement("input",{type:"radio",checked:"f"===t,className:"radio__btn",onChange:function(){return a("f")}})),r&&n.a.createElement("p",{className:"error__gender"},"Please, choose gender"))},x=function(e){var t=e.people,a=e.fatherValue,r=e.chooseFather,c=e.errorFather,o=t.map((function(e){return"m"===e.sex?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__father"}," ","Choose father:",n.a.createElement("select",{value:a,onChange:function(e){return r(e)}},n.a.createElement("option",{value:"",hidden:!0},"Choose here"),o.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),c&&n.a.createElement("span",{className:"error__father"},"Choose father"))},P=function(e){var t=e.people,a=e.fatherValue,r=e.chooseMother,c=e.errorMother,o=t.map((function(e){return"f"===e.sex?e.name:""})).filter((function(e){return e}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"add__mother"}," ","Choose mother:",n.a.createElement("select",{value:a,onChange:function(e){return r(e)}},n.a.createElement("option",{value:"",hidden:!0},"Choose here"),o.map((function(e){return n.a.createElement("option",{value:e,key:e+(new Date).getTime},e)})))),c&&n.a.createElement("span",{className:"error__mother"},"Choose mother"))},B=/[0-9]| {2}|\!|\.|\@|\#|\$|\%|\^|\&|\*|\(|\)|^\s+/g,D=(new Date).getFullYear(),F=function(e){var t=e.people,a=e.addPerson,c=Object(r.useState)(""),o=Object(s.a)(c,2),l=o[0],u=o[1],i=Object(r.useState)(""),m=Object(s.a)(i,2),d=m[0],f=m[1],p=Object(r.useState)(""),b=Object(s.a)(p,2),h=b[0],g=b[1],E=Object(r.useState)(""),v=Object(s.a)(E,2),O=v[0],j=v[1],y=Object(r.useState)(""),N=Object(s.a)(y,2),_=N[0],C=N[1],F=Object(r.useState)(""),V=Object(s.a)(F,2),L=V[0],M=V[1],I=Object(r.useState)(!1),T=Object(s.a)(I,2),X=T[0],A=T[1],G=Object(r.useState)(!1),H=Object(s.a)(G,2),Y=H[0],q=H[1],z=Object(r.useState)(!1),J=Object(s.a)(z,2),R=J[0],U=J[1],W=Object(r.useState)(!1),$=Object(s.a)(W,2),K=$[0],Q=$[1],Z=Object(r.useState)(!1),ee=Object(s.a)(Z,2),te=ee[0],ae=ee[1],re=Object(r.useState)(!1),ne=Object(s.a)(re,2),ce=ne[0],oe=ne[1],le=Object(r.useState)(!1),ue=Object(s.a)(le,2),se=ue[0],ie=ue[1],me=Object(r.useState)(!1),de=Object(s.a)(me,2),fe=de[0],pe=de[1],be=function(){u(""),f(""),g(""),j(""),C(""),M(""),ie(!1)};return n.a.createElement("div",{className:"add__people"},n.a.createElement("p",{className:"add__title"},"Add new person"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},n.a.createElement(k,{nameValue:l,handleInputName:function(e){u(e.target.value.replace(B,"")),e.target.value?U(!1):U(!0)},errorName:R,bornValue:d,handleInputAgeInfo:function(e,t){var a=e.target.value.replace(/\D/g,"");"born"===t&&(f(a),e.target.value?(Q(!1),oe(!1),ie(!1)):(Q(!0),ie(!1))),"died"===t&&(g(a),a?(ae(!1),ie(!1),oe(!1)):(ae(!0),ie(!1)))},errorBorn:K,diedValue:h,errorDied:te,blurValidation:function(e){l||"name"!==e?!(+d>D)&&d||"born"!==e?(+h>D||!h)&&"died"===e&&ae(!0):Q(!0):U(!0)}}),n.a.createElement(w,{genderValue:O,chooseGender:function(e){j(e),pe(!1)},errorGender:fe}),n.a.createElement(x,{people:t,fatherValue:_,chooseFather:function(e){C(e.target.value),q(!1)},errorFather:Y}),n.a.createElement(P,{people:t,fatherValue:L,chooseMother:function(e){M(e.target.value),A(!1)},errorMother:X}),n.a.createElement(S,{errorBorn:K,errorDied:te,errorName:R,bigDifference:se,minusDifference:ce,validation:function(){return+d>+h?(console.log("more than"),oe(!0),ae(!0),void Q(!0)):(l||U(!0),(+d>D||!d)&&Q(!0),(+h>D||!h)&&ae(!0),+h-+d>=150?(ie(!0),ae(!0),void Q(!0)):(_||q(!0),L||A(!0),O||pe(!0),void(X||Y||R||K||te||ce||se||fe||(console.log(ce),console.log("in"),a(l,d,h,O,_,L),be()))))}})))},V={id:"number",name:"string",sex:"string",born:"number",father:"string",mother:"string",died:"number",age:"number",century:"number",children:"string"},L=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(""),m=Object(s.a)(o,2),d=m[0],f=m[1],p=Object(r.useState)(!1),h=Object(s.a)(p,2),g=h[0],E=h[1],v=Object(i.f)(),O=Object(i.g)(),N=new URLSearchParams(O.search),_=N.get("sortBy")||"",k=N.get("sortOrder")||"";Object(r.useEffect)((function(){a.length&&!g&&_&&(E(!0),S(_,V[_]))}),[_,a]),Object(r.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var S=function(e,t){var r="";if("asc"===k){var n=Object(u.a)(a).sort((function(a,r){var n=a[e]||"",c=r[e]||"";return"number"===t?Number(c)-Number(n):"string"===t?c.localeCompare(n):0}));return r=g?"desc":"asc",c(n),N.set("sortBy","".concat(e)),N.set("sortOrder","".concat(r)),v.push({search:N.toString()}),void E(!0)}var o=Object(u.a)(a).sort((function(a,r){var n=a[e]||"",c=r[e]||"";return"number"===t?Number(n)-Number(c):"string"===t?n.localeCompare(c):0}));c(o),r=g?"asc":"desc",E(!0),N.set("sortBy","".concat(e)),N.set("sortOrder","".concat(r)),v.push({search:N.toString()})},w=function(e){x(e)},x=Object(r.useCallback)(y((function(e){return f(e)}),1e3),[]),P=Object(r.useMemo)((function(){return d?a.filter((function(e){var t=e.name,a=e.mother,r=e.father,n=d.toLowerCase();return!!n&&!!(t.toLowerCase().includes(n)||a.toLowerCase().includes(n)||r.toLowerCase().includes(n))})):a}),[d,a]),B=function(e,t,r,o,l,s){var m=a.map((function(e){return e.id})),d={id:Math.max.apply(Math,Object(u.a)(m))+1,name:e,born:+t,died:+r,sex:o,father:l,mother:s,age:+r-+t,century:Math.ceil(+t/100),children:""};return c([].concat(Object(u.a)(a),[d])),n.a.createElement(i.a,{to:"/people/:id?"})};return n.a.createElement("div",{className:"App"},n.a.createElement("nav",null,n.a.createElement("ul",{className:"list"},n.a.createElement("li",{className:"item"},n.a.createElement(l.b,{activeClassName:"activeLink",className:"linka",to:"/",exact:!0},"Home")),n.a.createElement("li",{className:"item"},n.a.createElement(l.b,{activeClassName:"activeLink",className:"linka",to:"/people"},"People Table")))),n.a.createElement(i.b,{path:"/people/:id?",render:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{people:a,addPerson:B}),n.a.createElement(C,{startDebounce:w}),n.a.createElement(j,{people:P,sortBy:S}))}}),n.a.createElement(i.b,{exact:!0,path:"/",render:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{className:"title"},"Demo heaeder"))}}))};o.a.render(n.a.createElement(l.a,null,n.a.createElement(L,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.62c09caa.chunk.js.map